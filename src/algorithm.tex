In this section, 
assuming costs are integral and polynomial bounded in the input length,
we present an efficient algorithm to the \VPN{} problem.
We then argue that, using a standard scaling and rounding technique, we can use
the same computation to achieve a solution with a cost only
$1 + \varepsilon$ times greater that of the optimal solution, for any
$\varepsilon > 0$, i.e. an FPTAS, for an arbitrary cost function.
We also extend our algorithm when every physical arc carry some latency on it
and a global latency constraint is given.
Our algorithms are recursive and can be efficiently computed using dynamic
programming.

We are given an instance of the \VPN{} problem 
\begin{align*}
\calG = (\calV, \calE)		\\
G = (V, E)		\\
(\sigma , \tau , s, t)	\\
(p, b, c)
\end{align*}

We start by arguing that a minimum cost 
$\alpha \gamma $-path with respect to vertex $v$ can be
found efficiently, that is a virtual $\alpha \gamma $-path that can be embedded 
into $v$ without violating its processing capacity that has the minimum cost
among all those paths.
Let $P_{v}(\alpha ,\gamma , C)$ 
denote the minimum processing required to embed all the virtual vertices, excluding $\alpha $, on a $\alpha \gamma $-path into the physical
vertex $v$ with a cost constraint $C$.
$P$ can be computed recursively as follow:
\begin{align*}
&P_{v}(\alpha , \gamma , C) = 
\min_{\alpha \beta  \in \calE} P_{v}(\alpha , \beta , C - c(\gamma , v))
\\
&P(\alpha , \alpha , C) = 0
\\
&P(-, -, <0) = \infty
\end{align*}
Computing $\min_{C : P_v(\alpha, \gamma, C) \leq p(v)}$ gives the desired
result.
 
We now show how to compute the optimal embedding.
Let $C(\gamma , w)$ denote the
optimal embedding of a $\sigma \gamma $-path into a $sw$-path.
Let $\pi:\beta  \to \N$ be any typological ordering of $\beta $. 
We claim that $C$ can be computed recursively as follow:
\begin{align*}
&C(\gamma , w) = 
\min_{\substack{
\alpha  : \pi(\alpha ) \leq \pi(\beta ), 
\\
vw \in E
}}
C(\alpha , u)
+
\argmin_{C : P_{w}(\beta , \gamma , C) \leq p_c(w)}
\\
&C(\sigma , w) = c(\sigma , w)
\end{align*}
Now, to compute the optimal embedding, one need to compute $C(\tau , t)$. 
We also note that in order to obey to the bandwidth constraints, 
one need to temporally remove all edges $\alpha \beta $ with bandwidth greater than
$b_c(v, w)$ from the virtual graph and only then compute $P_{w}(\beta , \gamma , C)$.
The above formulation is illustrated in Figure~\ref{fig:dp1}.

\begin{figure}[ht]
\centering
\input{fig-dp2}
\caption[]{
\label{fig:dp1}
The optimal embedding of a $\sigma \gamma $-path into a $sv$ path can be
efficiently computed by breaking the problem into the problem of embedding 
a $\sigma \alpha $-path into a $su$-path (blue, dashed clouds) 
and the problem of embedding a $\beta \gamma $-path into $v$ (orange, dotted) 
where $b_d(\alpha , \beta) \leq b_c(u, v)$.
Virtual arcs with high bandwidth demand (dashed arc) need to be removed before
the computation of the optimal path embedding.
}
\end{figure}